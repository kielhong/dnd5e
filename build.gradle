apply plugin: "java"
apply plugin: "eclipse"
apply plugin: "spring-boot"

repositories {
    mavenCentral()
    jcenter()
}

buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath "org.springframework.boot:spring-boot-gradle-plugin:1.1.8.RELEASE"
        classpath 'org.springframework:springloaded:1.2.0.RELEASE'
    }
}

sourceCompatibility = 1.7

dependencies {
    // Spring
    compile "org.springframework:spring-context-support:$springVersion"
    compile "org.springframework:spring-orm:$springVersion"
    // Spring Boot
    compile "org.springframework.boot:spring-boot-starter-web:1.1.8.RELEASE"
    compile("org.springframework.boot:spring-boot-starter-web") {
        exclude module: "spring-boot-starter-tomcat"
    }
    compile "org.springframework.boot:spring-boot-starter-jetty"
    compile "org.springframework.boot:spring-boot-starter-velocity"
    // DB
    compile "mysql:mysql-connector-java:5.1.29"
    compile "org.hibernate:hibernate-core:$hibernateVersion"
    compile "org.apache.tomcat:tomcat-jdbc:8.0.3"
    // Json
    compile "com.fasterxml.jackson.core:jackson-core:$jacksonVersion"
    compile "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
    // Validation
    compile "javax.validation:validation-api:1.1.0.Final"
    compile "org.hibernate:hibernate-validator:5.1.0.Final"
    // Swagger integration with SpringMVC
    compile "com.mangofactory:swagger-springmvc:0.8.8"
    compile "org.ajar:swagger-spring-mvc-ui:0.2"
    // Velocity
    //compile "org.apache.velocity:velocity:1.7"
    //compile "org.apache.velocity:velocity-tools:2.0"    
    
    compile "org.projectlombok:lombok:1.14.+"
    compile "log4j:log4j:1.2.17"
    
    // Test
    testCompile "javax.servlet:javax.servlet-api:3.1.0"            
    testCompile "org.springframework:spring-test:$springVersion"
    //testCompile "javax.servlet:javax.servlet-api:3.1.0"           
    testCompile "junit:junit:4.+"
    testCompile "com.jayway.jsonpath:json-path-assert:0.9.+"
    //testCompile "org.hamcrest:hamcrest-all:1.3"
}

task wrapper(type: Wrapper) { 
    gradleVersion = "2.1" 
}

jar {
    baseName = 'dnd5e'
    version =  '1.0.0'
}

// for delegate system properties to bootRun
tasks.withType(org.springframework.boot.gradle.run.BootRunTask) {
    systemProperties = System.properties
}

test {
    // set a system property for the test JVM(s)
    systemProperty "spring.profiles.active", "localhost"   
}