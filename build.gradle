apply plugin: "java"
apply plugin: "eclipse"
apply plugin: "jetty"

repositories {
    mavenCentral()
    jcenter()
}

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
    }
}

sourceCompatibility = 1.7

dependencies {
    // Spring
    compile "org.springframework:spring-core:$springVersion"
    compile "org.springframework:spring-jdbc:$springVersion"
    compile "org.springframework:spring-oxm:$springVersion"
    compile "org.springframework:spring-webmvc:$springVersion"
    compile "org.springframework:spring-context-support:$springVersion"
    
    // DB
    compile "mysql:mysql-connector-java:5.1.29"
    compile "org.apache.tomcat:tomcat-jdbc:8.0.3"
    compile "org.mybatis:mybatis:3.2.5"
    compile "org.mybatis:mybatis-spring:1.2.2"
    // Json
    compile "com.fasterxml.jackson.core:jackson-core:$jacksonVersion"
    compile "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
    // Validation
    compile "javax.validation:validation-api:1.1.0.Final"
    compile "org.hibernate:hibernate-validator:5.1.0.Final"
    // Swagger integration with SpringMVC
    compile "com.mangofactory:swagger-springmvc:0.8.8"
    compile "org.ajar:swagger-spring-mvc-ui:0.2"
    // Velocity
    compile "org.apache.velocity:velocity:1.7"
    compile "org.apache.velocity:velocity-tools:2.0"    
    
    compile "javax.inject:javax.inject:1"
    compile "org.apache.httpcomponents:httpclient:4.3.1"
    compile "org.projectlombok:lombok:1.12.6"
    compile "jstl:jstl:1.2"
    compile "log4j:log4j:1.2.17"
    
    // Test
    testCompile "javax.servlet:javax.servlet-api:3.1.0"            
    testCompile "org.springframework:spring-test:$springVersion"
    testCompile "junit:junit:4.+"
    testCompile "com.jayway.jsonpath:json-path-assert:0.9.+"
    testCompile "org.hamcrest:hamcrest-all:1.3"
}

task wrapper(type: Wrapper) { 
    gradleVersion = "1.11" 
}

jar {
    baseName = 'dnd5e'
    version =  '1.0.0'
}

jettyRun {
    contextPath = ""
    httpPort = 8081
}

test {
    // set a system property for the test JVM(s)
    systemProperty "spring.profiles.active", "local"   
}